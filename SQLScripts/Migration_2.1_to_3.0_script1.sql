-- ----------------------------------------------------------------------------------------------------------------
-- Generated by LLBLGen Pro v5.0  Build: 5.0.7
-- SQL Server 2000-2016/Express DDL Script generated from project: HnD
-- Project filename: C:\Myprojects\VS.NET Projects\Github\FransBouma\HnD\LLBLGenPro Projects\HnD.llblgenproj
-- Script generated on: 05-okt-2016 10:55.10
--
-- This is an Update script for updating an existing data model to a newer version. If you want DDL SQL for a new model,
-- please create a Create script instead. 
--
-- This script might create schemas, which requires you to assign a proper user to the schema. Adjust the CREATE SCHEMA
-- statements below, if any, to avoid errors at runtime.
--
-- Please run the scripts in the right order, use the timestamp in the filename and inside this script for that.
-- This script might need adjustment in some statements. You should consider this script as a starting point for
-- upgrading the existing data model.
-- ----------------------------------------------------------------------------------------------------------------

ALTER TABLE [dbo].[Message] DROP COLUMN [MessageTextAsXml]
GO

ALTER TABLE [dbo].[User] DROP COLUMN [SignatureAsHTML]
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [Password] [nvarchar](128) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [JoinDate] [datetime] NULL
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [AmountOfPostings] [int] NULL
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [EmailAddressIsPublic] [bit] NULL
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [LastVisitedDate] [datetime] NULL
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [AutoSubscribeToThread] [bit] NULL
GO

ALTER TABLE [dbo].[User] 
	ALTER COLUMN [DefaultNumberOfMessagesPerPage] [smallint] NULL
GO


CREATE TABLE [dbo].[PasswordResetToken] 
(
	[UserID] [int] NOT NULL, 
	[PasswordResetToken] [uniqueidentifier] NOT NULL, 
	[PasswordResetRequestedOn] [datetime] NOT NULL 
)
GO

ALTER TABLE [dbo].[PasswordResetToken] WITH NOCHECK 
	ADD CONSTRAINT [PK_446ab684e0591442b16f78fc437] PRIMARY KEY CLUSTERED 
	( 
		[UserID] 
	)
GO

ALTER TABLE [dbo].[PasswordResetToken] 
	ADD CONSTRAINT [FK_9f1eaa94f1fb774bb77aad91f5d] FOREIGN KEY
	(
		[UserID] 
	)
	REFERENCES [dbo].[User]
	(
		[UserID] 
	)
	ON DELETE CASCADE
	ON UPDATE NO ACTION
GO

ALTER TABLE [dbo].[Forum] DROP CONSTRAINT [DF_Forum_DefaultThreadListInterval]
GO

ALTER TABLE [dbo].[Forum] DROP COLUMN [DefaultThreadListInterval]
GO